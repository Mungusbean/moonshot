
  _     ._   __/__   _ _  _  _ _/_   Recorded: 22:15:27  Samples:  2783
 /_//_/// /_\ / //_// / //_'/ //     Duration: 17.635    CPU time: 11.230
/   _/                      v4.6.2

Program: /Users/lionelteo/Documents/moonshot/tests/test_api_perf.py

17.635 _UnixSelectorEventLoop.run_forever  asyncio/base_events.py:593
└─ 17.634 _UnixSelectorEventLoop._run_once  asyncio/base_events.py:1845
      [4 frames hidden]  asyncio, selectors, <built-in>
         11.326 Handle._run  asyncio/events.py:78
         ├─ 7.514 Benchmarking._process_single_prompt  moonshot/data/runners-modules/benchmarking.py:871
         │  ├─ 7.260 get_prediction  moonshot/src/connectors/connector.py:261
         │  │  └─ 7.252 OpenAIConnector.wrapper  moonshot/src/connectors/connector.py:147
         │  │     └─ 7.249 OpenAIConnector.wrapper  moonshot/src/connectors/connector.py:36
         │  │        └─ 7.246 OpenAIConnector.get_response  moonshot/data/connectors/openai-connector.py:26
         │  │           └─ 7.244 AsyncCompletions.create  openai/resources/chat/completions.py:1128
         │  │                 [28 frames hidden]  openai, httpx, httpcore, anyio, asyncio
         │  │                    6.101 Event.wait  asyncio/locks.py:200
         │  │                    └─ 6.101 [await]  asyncio/locks.py
         │  └─ 0.244 create_database_record  moonshot/src/storage/storage.py:328
         │     └─ 0.244 SQLite.create_record  moonshot/data/databases-modules/sqlite.py:80
         ├─ 3.393 profile_run_cookbook  tests/test_api_perf.py:569
         │  └─ 3.393 profile_async_function  tests/test_api_perf.py:81
         │     └─ 3.393 Runner.run_cookbooks  moonshot/src/runners/runner.py:351
         │        └─ 3.391 Run.run  moonshot/src/runs/run.py:170
         │           ├─ 3.088 Benchmarking.generate  moonshot/data/runners-modules/benchmarking.py:44
         │           │  └─ 3.038 Benchmarking._run_cookbook  moonshot/data/runners-modules/benchmarking.py:247
         │           │     └─ 3.024 Benchmarking._run_recipe  moonshot/data/runners-modules/benchmarking.py:329
         │           │        ├─ 2.679 ToxicityClassifier.get_results  moonshot/data/metrics/toxicity-classifier.py:35
         │           │        │  ├─ 1.679 AutoModelForSequenceClassification.from_pretrained  transformers/models/auto/auto_factory.py:444
         │           │        │  │     [47 frames hidden]  transformers, torch, <built-in>, hugg...
         │           │        │  ├─ 0.783 AutoTokenizer.from_pretrained  transformers/models/auto/tokenization_auto.py:678
         │           │        │  │     [25 frames hidden]  transformers, huggingface_hub, reques...
         │           │        │  └─ 0.210 RobertaForSequenceClassification._wrapped_call_impl  torch/nn/modules/module.py:1528
         │           │        │        [12 frames hidden]  torch, transformers
         │           │        └─ 0.306 Recipe.load  moonshot/src/recipes/recipe.py:28
         │           │           └─ 0.306 wrapper_function  pydantic/v1/decorator.py:38
         │           │                 [3 frames hidden]  pydantic
         │           │                    0.305 ValidatedFunction.execute  pydantic/v1/decorator.py:179
         │           │                    └─ 0.305 read  moonshot/src/recipes/recipe.py:84
         │           │                       └─ 0.304 _read_recipe  moonshot/src/recipes/recipe.py:110
         │           │                          └─ 0.293 <dictcomp>  moonshot/src/recipes/recipe.py:133
         │           │                             └─ 0.291 wrapper_function  pydantic/v1/decorator.py:38
         │           │                                   [3 frames hidden]  pydantic
         │           │                                      0.290 ValidatedFunction.execute  pydantic/v1/decorator.py:179
         │           │                                      └─ 0.290 read  moonshot/src/datasets/dataset.py:13
         │           │                                         └─ 0.290 _read_dataset  moonshot/src/datasets/dataset.py:40
         │           └─ 0.280 BenchmarkingResult.generate  moonshot/data/results-modules/benchmarking-result.py:11
         │              └─ 0.272 BenchmarkingResult._generate_result  moonshot/data/results-modules/benchmarking-result.py:99
         │                 └─ 0.272 BenchmarkingResult._generate_cookbooks_result  moonshot/data/results-modules/benchmarking-result.py:137
         │                    └─ 0.272 BenchmarkingResult._generate_recipes_result  moonshot/data/results-modules/benchmarking-result.py:276
         │                       └─ 0.272 Recipe.load  moonshot/src/recipes/recipe.py:28
         │                          └─ 0.272 wrapper_function  pydantic/v1/decorator.py:38
         │                                [3 frames hidden]  pydantic
         │                                   0.272 ValidatedFunction.execute  pydantic/v1/decorator.py:179
         │                                   └─ 0.272 read  moonshot/src/recipes/recipe.py:84
         │                                      └─ 0.272 _read_recipe  moonshot/src/recipes/recipe.py:110
         │                                         └─ 0.267 <dictcomp>  moonshot/src/recipes/recipe.py:133
         │                                            └─ 0.267 wrapper_function  pydantic/v1/decorator.py:38
         │                                                  [3 frames hidden]  pydantic
         │                                                     0.267 ValidatedFunction.execute  pydantic/v1/decorator.py:179
         │                                                     └─ 0.266 read  moonshot/src/datasets/dataset.py:13
         │                                                        └─ 0.266 _read_dataset  moonshot/src/datasets/dataset.py:40
         └─ 0.370 producer  moonshot/data/runners-modules/benchmarking.py:533
            └─ 0.370 Benchmarking._generate_prompts  moonshot/data/runners-modules/benchmarking.py:659
               └─ 0.365 Benchmarking._get_dataset_prompts  moonshot/data/runners-modules/benchmarking.py:745
                  └─ 0.254 wrapper_function  pydantic/v1/decorator.py:38
                        [3 frames hidden]  pydantic
                           0.251 ValidatedFunction.execute  pydantic/v1/decorator.py:179
                           └─ 0.251 read  moonshot/src/datasets/dataset.py:13
                              └─ 0.251 _read_dataset  moonshot/src/datasets/dataset.py:40
         6.301 kqueue.control  <built-in>

