
  _     ._   __/__   _ _  _  _ _/_   Recorded: 22:15:47  Samples:  615
 /_//_/// /_\ / //_// / //_'/ //     Duration: 2.152     CPU time: 0.661
/   _/                      v4.6.2

Program: /Users/lionelteo/Documents/moonshot/tests/test_api_perf.py

2.152 _UnixSelectorEventLoop._run_once  asyncio/base_events.py:1845
├─ 1.246 Handle._run  asyncio/events.py:78
│  ├─ 0.602 Benchmarking._process_single_prompt  moonshot/data/runners-modules/benchmarking.py:871
│  │  └─ 0.591 get_prediction  moonshot/src/connectors/connector.py:261
│  │     └─ 0.591 OpenAIConnector.wrapper  moonshot/src/connectors/connector.py:147
│  │        └─ 0.591 OpenAIConnector.wrapper  moonshot/src/connectors/connector.py:36
│  │           └─ 0.591 OpenAIConnector.get_response  moonshot/data/connectors/openai-connector.py:26
│  │              └─ 0.591 AsyncCompletions.create  openai/resources/chat/completions.py:1128
│  │                    [20 frames hidden]  openai, httpx, httpcore, anyio, asyncio
│  │                       0.545 Event.wait  asyncio/locks.py:200
│  │                       └─ 0.545 [await]  asyncio/locks.py
│  ├─ 0.395 profile_run_recipe  tests/test_api_perf.py:586
│  │  └─ 0.395 profile_async_function  tests/test_api_perf.py:81
│  │     └─ 0.395 Runner.run_recipes  moonshot/src/runners/runner.py:284
│  │        └─ 0.395 Run.run  moonshot/src/runs/run.py:170
│  │           ├─ 0.198 Benchmarking.generate  moonshot/data/runners-modules/benchmarking.py:44
│  │           │  ├─ 0.159 Benchmarking._run_recipe  moonshot/data/runners-modules/benchmarking.py:329
│  │           │  │  └─ 0.157 Recipe.load  moonshot/src/recipes/recipe.py:28
│  │           │  │     └─ 0.157 wrapper_function  pydantic/v1/decorator.py:38
│  │           │  │           [3 frames hidden]  pydantic
│  │           │  │              0.157 ValidatedFunction.execute  pydantic/v1/decorator.py:179
│  │           │  │              └─ 0.157 read  moonshot/src/recipes/recipe.py:84
│  │           │  │                 └─ 0.157 _read_recipe  moonshot/src/recipes/recipe.py:110
│  │           │  │                    └─ 0.156 <dictcomp>  moonshot/src/recipes/recipe.py:133
│  │           │  │                       └─ 0.156 wrapper_function  pydantic/v1/decorator.py:38
│  │           │  │                             [3 frames hidden]  pydantic
│  │           │  │                                0.155 ValidatedFunction.execute  pydantic/v1/decorator.py:179
│  │           │  │                                └─ 0.155 read  moonshot/src/datasets/dataset.py:13
│  │           │  │                                   └─ 0.155 _read_dataset  moonshot/src/datasets/dataset.py:40
│  │           │  │                                      ├─ 0.082 read_object_with_iterator  moonshot/src/storage/storage.py:47
│  │           │  │                                      │  └─ 0.079 JsonIO.read_file_iterator  moonshot/data/io-modules/jsonio.py:53
│  │           │  │                                      │     └─ 0.075 [self]  moonshot/data/io-modules/jsonio.py
│  │           │  │                                      └─ 0.072 count_objects  moonshot/src/storage/storage.py:142
│  │           │  │                                         └─ 0.062 GeneratorIO.__next__  moonshot/data/io-modules/jsonio.py:137
│  │           │  │                                            └─ 0.054 next  <built-in>
│  │           │  └─ 0.032 <listcomp>  moonshot/data/runners-modules/benchmarking.py:99
│  │           │     └─ 0.032 create  moonshot/src/connectors/connector.py:211
│  │           │        └─ 0.032 Connector.load  moonshot/src/connectors/connector.py:179
│  │           │           └─ 0.031 OpenAIConnector.__init__  moonshot/data/connectors/openai-connector.py:16
│  │           │              └─ 0.031 AsyncOpenAI.__init__  openai/_client.py:281
│  │           │                    [11 frames hidden]  openai, httpx, <built-in>
│  │           └─ 0.191 BenchmarkingResult.generate  moonshot/data/results-modules/benchmarking-result.py:11
│  │              └─ 0.176 BenchmarkingResult._generate_result  moonshot/data/results-modules/benchmarking-result.py:99
│  │                 └─ 0.176 BenchmarkingResult._generate_recipes_result  moonshot/data/results-modules/benchmarking-result.py:276
│  │                    └─ 0.176 Recipe.load  moonshot/src/recipes/recipe.py:28
│  │                       └─ 0.176 wrapper_function  pydantic/v1/decorator.py:38
│  │                             [3 frames hidden]  pydantic
│  │                                0.176 ValidatedFunction.execute  pydantic/v1/decorator.py:179
│  │                                └─ 0.176 read  moonshot/src/recipes/recipe.py:84
│  │                                   └─ 0.176 _read_recipe  moonshot/src/recipes/recipe.py:110
│  │                                      └─ 0.176 <dictcomp>  moonshot/src/recipes/recipe.py:133
│  │                                         └─ 0.176 wrapper_function  pydantic/v1/decorator.py:38
│  │                                               [3 frames hidden]  pydantic
│  │                                                  0.176 ValidatedFunction.execute  pydantic/v1/decorator.py:179
│  │                                                  └─ 0.176 read  moonshot/src/datasets/dataset.py:13
│  │                                                     └─ 0.176 _read_dataset  moonshot/src/datasets/dataset.py:40
│  │                                                        ├─ 0.093 read_object_with_iterator  moonshot/src/storage/storage.py:47
│  │                                                        │  └─ 0.087 JsonIO.read_file_iterator  moonshot/data/io-modules/jsonio.py:53
│  │                                                        │     └─ 0.080 [self]  moonshot/data/io-modules/jsonio.py
│  │                                                        └─ 0.083 count_objects  moonshot/src/storage/storage.py:142
│  │                                                           └─ 0.072 GeneratorIO.__next__  moonshot/data/io-modules/jsonio.py:137
│  │                                                              └─ 0.060 next  <built-in>
│  └─ 0.236 producer  moonshot/data/runners-modules/benchmarking.py:533
│     └─ 0.236 Benchmarking._generate_prompts  moonshot/data/runners-modules/benchmarking.py:659
│        └─ 0.234 Benchmarking._get_dataset_prompts  moonshot/data/runners-modules/benchmarking.py:745
│           ├─ 0.162 wrapper_function  pydantic/v1/decorator.py:38
│           │     [3 frames hidden]  pydantic
│           │        0.160 ValidatedFunction.execute  pydantic/v1/decorator.py:179
│           │        └─ 0.160 read  moonshot/src/datasets/dataset.py:13
│           │           └─ 0.160 _read_dataset  moonshot/src/datasets/dataset.py:40
│           │              ├─ 0.087 read_object_with_iterator  moonshot/src/storage/storage.py:47
│           │              │  └─ 0.083 JsonIO.read_file_iterator  moonshot/data/io-modules/jsonio.py:53
│           │              │     └─ 0.080 [self]  moonshot/data/io-modules/jsonio.py
│           │              └─ 0.073 count_objects  moonshot/src/storage/storage.py:142
│           │                 └─ 0.062 GeneratorIO.__next__  moonshot/data/io-modules/jsonio.py:137
│           │                    └─ 0.055 next  <built-in>
│           └─ 0.063 GeneratorIO.__next__  moonshot/data/io-modules/jsonio.py:137
│              └─ 0.048 next  <built-in>
└─ 0.905 KqueueSelector.select  selectors.py:558
      [2 frames hidden]  selectors, <built-in>
         0.905 kqueue.control  <built-in>

